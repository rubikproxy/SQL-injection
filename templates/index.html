<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Form</title>
    <link rel="stylesheet" href="/static/style.css">

</head>

<body>
    <div class="box">
        <h2 class="title">Student Form</h2>
        <form action="/submit" method="post" class="inputBox" enctype="multipart/form-data">
            {{ form.csrf_token }}
            <div class="box">
                {% for message in messages %}
                    {% if 'success' in message %}
                        <div class="alert alert-success">{{ message }}</div>
                    {% elif 'danger' in message %}
                        <div class="alert alert-danger">{{ message }}</div>
                    {% else %}
                        <div class="alert alert-info">{{ message }}</div>
                    {% endif %}
                {% endfor %}
                <div class="user__details">
                    <div class="input__box">
                        <label class="details" for="first_name">First Name*:</label>
                        <input type="text" id="first_name" name="first_name" placeholder="Enter your first name" required>
                    </div>
        
                    <div class="input__box">
                        <label class="details" for="last_name">Last Name*:</label>
                        <input type="text" id="last_name" name="last_name" placeholder="Enter your last name" required>
                    </div>
        
                    <div class="input__box">
                        <label class="details" for="phone">Phone*:</label>
                        <input type="text" id="phone" name="phone" placeholder="Enter your phone number" required pattern="[0-9]+">
                    </div>
        
                    <div class="input__box">
                        <label class="details" for="address">Address*:</label>
                        <input type="text" id="address" name="address" placeholder="Enter your address" required>
                    </div>
        
                    <div class="input__box">
                        <label class="details" for="pincode">Pincode*:</label>
                        <input type="text" id="pincode" name="pincode" placeholder="Enter your pincode" required pattern="[0-9]+">
                    </div>
        
                    <div class="input__box">
                        <label class="details" for="email">Email*:</label>
                        <input type="email" id="email" name="email" placeholder="Enter your email" required>
                    </div>
        
                    <div class="gender__details">
                        <label class="details" for="gender">Gender*:</label>
                        <div class="category">
                            <select id="gender" name="gender" required>
                                <option value="" disabled selected>Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                    </div>
        
                    <div class="dob__details">
                        <label class="details" for="dob">Date of Birth*:</label>
                        <input type="date" id="dob" name="dob" required>
                    </div>
                </div>
                <div class="button">
                    <input type="submit" value="Submit">
                </div>
            </div>
        </form>
        
        
    </div>
</body>
<script>
        // XSS protection function
        function escapeHtml(unsafe) {
        return unsafe.replace(/[&<"'>]/g, function (match) {
            switch (match) {
                case "&":
                    return "&amp;";
                case "<":
                    return "&lt;";
                case ">":
                    return "&gt;";
                case '"':
                    return "&quot;";
                case "'":
                    return "&#039;";
            }
        });
    }
            // Client-side validation
            if (firstNameInput.value === "" || lastNameInput.value === "" || phoneInput.value === "" ||
            addressInput.value === "" || pincodeInput.value === "" || emailInput.value === "" ||
            genderSelect.value === "" || dobInput.value === "") {
            alert("All fields are required. Please fill in all the details.");
            return false;
        }
// Validate form and apply XSS protection
function validateForm() {
    var firstNameInput = document.getElementById('firstName');
    var lastNameInput = document.getElementById('lastName');
    var phoneInput = document.getElementById('phone');
    var addressInput = document.getElementById('address');
    var pincodeInput = document.getElementById('pincode');
    var emailInput = document.getElementById('email');
    var genderSelect = document.getElementsByName('gender')[0];
    var dobInput = document.getElementById('dob');

    // Apply XSS protection to input values
    firstNameInput.value = escapeHtml(firstNameInput.value);
    lastNameInput.value = escapeHtml(lastNameInput.value);
    phoneInput.value = escapeHtml(phoneInput.value);
    addressInput.value = escapeHtml(addressInput.value);
    pincodeInput.value = escapeHtml(pincodeInput.value);
    emailInput.value = escapeHtml(emailInput.value);

    // Return true to allow form submission
    return true;
}

</script>

</html>
